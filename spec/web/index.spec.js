!function(){return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[o]={exports:{}};e[o][0].call(a.exports,function(t){var n=e[o][1][t];return i(n||t)},a,a.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}}()({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t(2),i=t(35);n.default=function(){let t;const{emit:e,listen:n}=r.createChangeEmitter();return{sink:{next(t){e("next",t)},error(t){e("error",t)},complete(){e("complete")}},source$:{subscribe:function(e,r,i){let s=!1;const o="function"!=typeof e?e:{next:e,error:r,complete:i};return t?(u(t.key,t.error),{unsubscribe(){}}):{unsubscribe:n(u)};function u(e,n){if(s)return;"next"!==e&&(t={key:e,error:n},s=!0);const r=o[e];r&&r(n)}},[i.default](){return this}}}}},{2:2,35:35}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.createChangeEmitter=function(){var t=[],e=t;function n(){e===t&&(e=t.slice())}return{listen:function(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var r=!0;return n(),e.push(t),function(){if(r){r=!1,n();var i=e.indexOf(t);e.splice(i,1)}}},emit:function(){for(var n=t=e,r=0;r<n.length;r++)n[r].apply(n,arguments)}}}},{}],35:[function(t,e,n){(function(r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,s,o=t(36),u=(s=o)&&s.__esModule?s:{default:s};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==e?e:Function("return this")();var c=(0,u.default)(i);n.default=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{36:36}],3:[function(t,e,n){"use strict";var r=t(4),i=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();n.Notification=i},{4:4}],4:[function(t,e,n){"use strict";var r=t(32),i=t(33),s=t(21),o=t(31),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=i.toSubscriber(t,e,n);if(r?r.call(s,this.source):s.add(this.source||!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i;i=n.subscribe(function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[s.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();n.Observable=u},{21:21,31:31,32:32,33:33}],32:[function(t,e,n){(function(t){"use strict";var e="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=e||void 0!==t&&t||r;n.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){"use strict";var r=t(32);function i(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.observable=i(r.root),n.observable},{32:32}],31:[function(t,e,n){"use strict";var r=t(30);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}n.pipeFromArray=i},{30:30}],33:[function(t,e,n){"use strict";var r=t(7),i=t(22),s=t(5);n.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(s.empty)}},{22:22,5:5,7:7}],5:[function(t,e,n){"use strict";n.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},{}],6:[function(t,e,n){"use strict";var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();n.Scheduler=r},{}],7:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t(27),s=t(8),o=t(5),u=t(22),c=function(t){function e(n,r,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o.empty;break;case 1:if(!n){this.destination=o.empty;break}if("object"==typeof n){n instanceof e?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new h(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new h(this,n,r,i)}}return r(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(s.Subscription);n.Subscriber=c;var h=function(t){function e(e,n,r,s){var u;t.call(this),this._parentSubscriber=e;var c=this;i.isFunction(n)?u=n:n&&(u=n.next,r=n.error,s=n.complete,n!==o.empty&&(c=Object.create(n),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=u,this._error=r,this._complete=s}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c)},{22:22,27:27,5:5,8:8}],22:[function(t,e,n){"use strict";var r=t(32).root.Symbol;n.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",n.rxSubscriber},{32:32}],27:[function(t,e,n){"use strict";n.isFunction=function(t){return"function"==typeof t}},{}],8:[function(t,e,n){"use strict";var r=t(25),i=t(28),s=t(27),o=t(34),u=t(24),c=t(23),h=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,h=this._parents,f=this._unsubscribe,l=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,b=h?h.length:0;n;)n.remove(this),n=++p<b&&h[p]||null;if(s.isFunction(f)&&o.tryCatch(f).call(this)===u.errorObject&&(e=!0,t=t||(u.errorObject.e instanceof c.UnsubscriptionError?a(u.errorObject.e.errors):[u.errorObject.e])),r.isArray(l))for(p=-1,b=l.length;++p<b;){var d=l[p];if(i.isObject(d)&&o.tryCatch(d.unsubscribe).call(d)===u.errorObject){e=!0,t=t||[];var y=u.errorObject.e;y instanceof c.UnsubscriptionError?t=t.concat(a(y.errors)):t.push(y)}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function a(t){return t.reduce(function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)},[])}n.Subscription=h},{23:23,24:24,25:25,27:27,28:28,34:34}],25:[function(t,e,n){"use strict";n.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},{}],28:[function(t,e,n){"use strict";n.isObject=function(t){return null!=t&&"object"==typeof t}},{}],24:[function(t,e,n){"use strict";n.errorObject={e:{}}},{}],23:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(e,t),e}(Error);n.UnsubscriptionError=i},{}],34:[function(t,e,n){"use strict";var r,i=t(24);function s(){try{return r.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}n.tryCatch=function(t){return r=t,s}},{24:24}],9:[function(t,e,n){"use strict";var r=t(4),i=t(14);r.Observable.of=i.of},{14:14,4:4}],14:[function(t,e,n){"use strict";var r=t(11);n.of=r.ArrayObservable.of},{11:11}],10:[function(t,e,n){"use strict";var r=t(4),i=t(15);r.Observable.prototype.delay=i.delay},{15:15,4:4}],15:[function(t,e,n){"use strict";var r=t(20),i=t(16);n.delay=function(t,e){return void 0===e&&(e=r.async),i.delay(t,e)(this)}},{16:16,20:20}],11:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t(4),s=t(13),o=t(12),u=t(29),c=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];u.isScheduler(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new s.ScalarObservable(t[0],r):new o.EmptyObservable(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e[n]),i.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var s=0;s<r&&!t.closed;s++)t.next(n[s]);t.complete()},e}(i.Observable);n.ArrayObservable=c},{12:12,13:13,29:29,4:4}],29:[function(t,e,n){"use strict";n.isScheduler=function(t){return t&&"function"==typeof t.schedule}},{}],13:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,r=t.subscriber;e?r.complete():(r.next(n),r.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(t(4).Observable);n.ScalarObservable=i},{4:4}],12:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(t(4).Observable);n.EmptyObservable=i},{4:4}],16:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t(20),s=t(26),o=t(7),u=t(3);n.delay=function(t,e){void 0===e&&(e=i.async);var n=s.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new c(n,e))}};var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.delay,this.scheduler))},t}(),h=function(t){function e(e,n,r){t.call(this,e),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return r(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var s=Math.max(0,n[0].time-r.now());this.schedule(t,s)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new a(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(u.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(u.Notification.createComplete())},e}(o.Subscriber),a=function(t,e){this.time=t,this.notification=e}},{20:20,26:26,3:3,7:7}],20:[function(t,e,n){"use strict";var r=t(18),i=t(19);n.async=new i.AsyncScheduler(r.AsyncAction)},{18:18,19:19}],26:[function(t,e,n){"use strict";n.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},{}],17:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(e,n){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(t(8).Subscription);n.Action=i},{8:8}],18:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t(32),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),i.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;i.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(t(17).Action);n.AsyncAction=s},{17:17,32:32}],19:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(t(6).Scheduler);n.AsyncScheduler=i},{6:6}],30:[function(t,e,n){"use strict";n.noop=function(){}},{}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}},{}],37:[function(t,e,n){"use strict";const r=t(1).default,i=t(4).Observable;t(9),t(10),describe("Subject",function(){describe(".source$",function(){it("should pump values right on through itself",function(t){const e=r(),n=["foo","bar"],i=e.source$.subscribe(function(t){expect(t).toBe(n.shift())},function(e){i.unsubscribe(),t(new Error("should not be called"))},function(e){i.unsubscribe(),t()});e.sink.next("foo"),e.sink.next("bar"),e.sink.complete()}),it("should pump values to multiple subscribers",function(t){const e=r(),n=["foo","bar"],i=[];let s=0,o=0;i.push(e.source$.subscribe(function(t){expect(t).toBe(n[s++])})),i.push(e.source$.subscribe(function(t){expect(t).toBe(n[o++])},function(e){i.forEach(t=>t.unsubscribe()),t(new Error("should not be called"))},function(e){i.forEach(t=>t.unsubscribe()),t()})),e.sink.next("foo"),e.sink.next("bar"),e.sink.complete()}),it("should handle subscribers that arrive and leave at different times, subject does not complete",function(){const t=r(),e=[],n=[],i=[];t.sink.next(1),t.sink.next(2),t.sink.next(3),t.sink.next(4);const s=t.source$.subscribe(function(t){e.push(t)},function(t){e.push("E")},function(){e.push("C")});t.sink.next(5);const o=t.source$.subscribe(function(t){n.push(t)},function(t){n.push("E")},function(){n.push("C")});t.sink.next(6),t.sink.next(7),s.unsubscribe(),t.sink.next(8),o.unsubscribe(),t.sink.next(9),t.sink.next(10);const u=t.source$.subscribe(function(t){i.push(t)},function(t){i.push("E")},function(){i.push("C")});t.sink.next(11),u.unsubscribe(),expect(e).toEqual([5,6,7]),expect(n).toEqual([6,7,8]),expect(i).toEqual([11])}),it("should handle subscribers that arrive and leave at different times, subject completes",function(){const t=r(),e=[],n=[],i=[];t.sink.next(1),t.sink.next(2),t.sink.next(3),t.sink.next(4);const s=t.source$.subscribe(function(t){e.push(t)},function(t){e.push("E")},function(){e.push("C")});t.sink.next(5);const o=t.source$.subscribe(function(t){n.push(t)},function(t){n.push("E")},function(){n.push("C")});t.sink.next(6),t.sink.next(7),s.unsubscribe(),t.sink.complete(),o.unsubscribe(),t.source$.subscribe(function(t){i.push(t)},function(t){i.push("E")},function(){i.push("C")}).unsubscribe(),expect(e).toEqual([5,6,7]),expect(n).toEqual([6,7,"C"]),expect(i).toEqual(["C"])}),it("should handle subscribers that arrive and leave at different times, subject terminates with an error",function(){const t=r(),e=[],n=[],i=[];t.sink.next(1),t.sink.next(2),t.sink.next(3),t.sink.next(4);const s=t.source$.subscribe(function(t){e.push(t)},function(t){e.push("E")},function(){e.push("C")});t.sink.next(5);const o=t.source$.subscribe(function(t){n.push(t)},function(t){n.push("E")},function(){n.push("C")});t.sink.next(6),t.sink.next(7),s.unsubscribe(),t.sink.error(new Error("err")),o.unsubscribe(),t.source$.subscribe(function(t){i.push(t)},function(t){i.push("E")},function(){i.push("C")}).unsubscribe(),expect(e).toEqual([5,6,7]),expect(n).toEqual([6,7,"E"]),expect(i).toEqual(["E"])}),it("should handle subscribers that arrive and leave at different times, subject completes before nexting any value",function(){const t=r(),e=[],n=[],i=[],s=t.source$.subscribe(function(t){e.push(t)},function(t){e.push("E")},function(){e.push("C")}),o=t.source$.subscribe(function(t){n.push(t)},function(t){n.push("E")},function(){n.push("C")});s.unsubscribe(),t.sink.complete(),o.unsubscribe(),t.source$.subscribe(function(t){i.push(t)},function(t){i.push("E")},function(){i.push("C")}).unsubscribe(),expect(e).toEqual([]),expect(n).toEqual(["C"]),expect(i).toEqual(["C"])})}),describe(".sink",function(){it("should be an Observer which can be given to Observable.subscribe",function(t){const e=i.of(1,2,3,4,5),n=r(),s=[1,2,3,4,5],o=n.source$.subscribe(function(t){expect(t).toBe(s.shift())},function(e){o.unsubscribe(),t(new Error("should not be called"))},function(e){o.unsubscribe(),t()});e.subscribe(n.sink)}),it("should be usable as an Observer of a finite delayed Observable",function(t){const e=i.of(1,2,3).delay(50),n=r(),s=[1,2,3];n.source$.subscribe(function(t){expect(t).toBe(s.shift())},function(e){t(new Error("should not be called"))},function(){t()}),e.subscribe(n.sink)}),it("should not next after completed",function(){const t=r(),e=[],n=t.source$.subscribe(t=>e.push(t),null,()=>e.push("C"));t.sink.next("a"),t.sink.complete(),t.sink.next("b"),expect(e).toEqual(["a","C"]),n.unsubscribe()}),it("should not next after error",function(){const t=new Error("wut?"),e=r(),n=[],i=e.source$.subscribe(t=>n.push(t),t=>n.push(t));e.sink.next("a"),e.sink.error(t),e.sink.next("b"),expect(n).toEqual(["a",t]),i.unsubscribe()})})})},{1:1,10:10,4:4,9:9}]},{},[37]);
